document.addEventListener("DOMContentLoaded",function(){(new MutationObserver(c=>{for(let k of c)for(let a of k.addedNodes)if(a instanceof HTMLElement&&(a.matches('[class*="cck_form_group_x"]')||a.matches(".ui-sortable > div"))){a.querySelector("aside")?a.querySelector("aside"):a.querySelector(".collection-group-button");var d=a.previousElementSibling,g=a.getAttribute("id")?a.getAttribute("id"):a.querySelector("[id]").getAttribute("id"),e=d.getAttribute("id")?d.getAttribute("id"):d.querySelector("[id]").getAttribute("id");
c=a.closest(".ui-sortable").parentNode.getAttribute("id").replace(/([^_]*)_(.*)/,"$2");var f=new RegExp(String.raw`.*${c}_+(\d*)`,"gm");g=1*g.replace(f,"$1");f=1*e.replace(f,"$1");let l=new RegExp(String.raw`\"([^"]*)${c}(_+)${f}\"`,"g"),h={};a.querySelectorAll("input, textarea, select").forEach(b=>{h[b.id]=b.value});a.innerHTML=d.innerHTML.replace(new RegExp(String.raw`${c}(_+)${f}`,"g"),c+"$1"+g);a.querySelectorAll(".cck_forms.cck_upload_image").forEach(b=>{b.remove()});a.querySelectorAll("input[type=file][onchange]").forEach(b=>
{b.removeAttribute("onchange")});for(let b in h)a.querySelector("#"+b)&&(a.querySelector("#"+b).value=h[b]);e=0;d=d.attributes;for(var m=d.length;e<m;e++)a.setAttribute(d[e].nodeName,d[e].value.replace(l,"$1"+c+"$2"+g).replace(c+"["+f+"]",c+"["+g+"]"))}})).observe(document.documentElement,{childList:!0,subtree:!0,characterDataOldValue:!1})});
